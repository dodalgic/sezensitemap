<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Site Haritası</title>
<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: #fafafa;
  color: #333;
  margin: 0;
  padding: 0 10px;
}
h2 {
  background: #0078D7;
  color: #fff;
  padding: 10px;
  border-radius: 6px;
}
.section {
  margin-bottom: 20px;
}
ul {
  list-style: none;
  padding-left: 15px;
}
li {
  margin: 4px 0;
}
a {
  color: #0066cc;
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}
.loader {
  text-align: center;
  padding: 30px;
  font-size: 18px;
}
</style>
</head>
<body>
<h2>📜 Site Haritası</h2>
<div id="sitemap">
  <div class="loader">Yükleniyor...</div>
</div>

<script>
/* Blogspot Site Haritası Scripti */
const blogURL = "https://turkuyedenradyolar.blogspot.com//";
const sitemapEl = document.getElementById("sitemap");

async function fetchLabels() {
  const res = await fetch(blogURL + "feeds/posts/summary?alt=json&max-results=0");
  const data = await res.json();
  const labels = data.feed.category.map(c => c.term);
  return labels;
}

async function fetchPosts(label) {
  let url = `${blogURL}feeds/posts/default/-/${encodeURIComponent(label)}?alt=json&max-results=150`;
  const res = await fetch(url);
  const data = await res.json();
  if (!data.feed.entry) return [];
  return data.feed.entry.map(e => ({
    title: e.title.$t,
    link: e.link.find(l => l.rel === 'alternate').href
  }));
}

async function buildSitemap() {
  const labels = await fetchLabels();
  let html = "";
  for (const label of labels) {
    html += `<div class="section"><h3>📁 ${label}</h3><ul>`;
    const posts = await fetchPosts(label);
    for (const p of posts) {
      html += `<li><a href="${p.link}" target="_blank">${p.title}</a></li>`;
    }
    html += `</ul></div>`;
  }
  sitemapEl.innerHTML = html || "<p>Henüz içerik bulunamadı.</p>";
}

buildSitemap();
</script>
</body>
</html>
